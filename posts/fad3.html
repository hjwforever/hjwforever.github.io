<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="utf-8"><meta name="keywords" content="Podman vs Docker | Podman简介及安装, HTML,CSS,JavaScript,Nodejs,React,Vue.js"><meta name="description" content="个人所得, 经验分享"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><script async src="https://www.googletagmanager.com/gtag/js?id=G-LF8NP7JK3N"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-LF8NP7JK3N")</script><title>Podman vs Docker | Podman简介及安装 | hjwforever</title><link rel="icon" type="image/png" href="/favicon.png"><link rel="stylesheet" href="/libs/awesome/css/all.css"><link rel="stylesheet" href="/libs/materialize/materialize.min.css"><link rel="stylesheet" href="/libs/aos/aos.css"><link rel="stylesheet" href="/libs/animate/animate.min.css"><link rel="stylesheet" href="/libs/lightGallery/css/lightgallery.min.css"><link rel="stylesheet" href="/css/matery.css"><link rel="stylesheet" href="/css/my.css"><script src="/libs/jquery/jquery.min.js"></script><meta name="generator" content="Hexo 6.0.0"><link rel="alternate" href="/atom.xml" title="hjwforever" type="application/atom+xml"></head><body><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="nav-wrapper container"><div class="brand-logo"><a href="/" class="waves-effect waves-light"><img src="/medias/logo.png" class="logo-img" alt="LOGO"> <span class="logo-span">hjwforever</span></a></div><a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a><ul class="right nav-menu"><li class="hide-on-med-and-down nav-item"><a href="/" class="waves-effect waves-light"><i class="fas fa-home" style="zoom:.6"></i> <span>首页</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/tags" class="waves-effect waves-light"><i class="fas fa-tags" style="zoom:.6"></i> <span>标签</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/categories" class="waves-effect waves-light"><i class="fas fa-bookmark" style="zoom:.6"></i> <span>分类</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/archives" class="waves-effect waves-light"><i class="fas fa-archive" style="zoom:.6"></i> <span>归档</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/about" class="waves-effect waves-light"><i class="fas fa-user-circle" style="zoom:.6"></i> <span>关于</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/contact" class="waves-effect waves-light"><i class="fas fa-comments" style="zoom:.6"></i> <span>留言板</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/friends" class="waves-effect waves-light"><i class="fas fa-address-book" style="zoom:.6"></i> <span>友情链接</span></a></li><li><a href="#searchModal" class="modal-trigger waves-effect waves-light"><i id="searchIcon" class="fas fa-search" title="搜索" style="zoom:.85"></i></a></li></ul><div id="mobile-nav" class="side-nav sidenav"><div class="mobile-head bg-color"><img src="/medias/logo.png" class="logo-img circle responsive-img"><div class="logo-name">hjwforever</div><div class="logo-desc">个人所得, 经验分享</div></div><ul class="menu-list mobile-menu-list"><li class="m-nav-item"><a href="/" class="waves-effect waves-light"><i class="fa-fw fas fa-home"></i> 首页</a></li><li class="m-nav-item"><a href="/tags" class="waves-effect waves-light"><i class="fa-fw fas fa-tags"></i> 标签</a></li><li class="m-nav-item"><a href="/categories" class="waves-effect waves-light"><i class="fa-fw fas fa-bookmark"></i> 分类</a></li><li class="m-nav-item"><a href="/archives" class="waves-effect waves-light"><i class="fa-fw fas fa-archive"></i> 归档</a></li><li class="m-nav-item"><a href="/about" class="waves-effect waves-light"><i class="fa-fw fas fa-user-circle"></i> 关于</a></li><li class="m-nav-item"><a href="/contact" class="waves-effect waves-light"><i class="fa-fw fas fa-comments"></i> 留言板</a></li><li class="m-nav-item"><a href="/friends" class="waves-effect waves-light"><i class="fa-fw fas fa-address-book"></i> 友情链接</a></li><li><div class="divider"></div></li><li><a href="https://github.com/hjwforever" class="waves-effect waves-light" target="_blank"><i class="fab fa-github-square fa-fw"></i> Fork Me</a></li></ul></div></div><style>.nav-transparent .github-corner{display:none!important}.github-corner{position:absolute;z-index:10;top:0;right:0;border:0;transform:scale(1.1)}.github-corner svg{color:#0f9d58;fill:#fff;height:64px;width:64px}.github-corner:hover .octo-arm{animation:a .56s ease-in-out}.github-corner .octo-arm{animation:none}@keyframes a{0%,to{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}</style><a href="https://github.com/hjwforever" class="github-corner tooltipped hide-on-med-and-down" target="_blank" data-tooltip="Fork Me" data-position="left" data-delay="50"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a></nav></header><div class="bg-cover pd-header post-cover" style="background-image:url(/medias/featureimages/2.jpg)"><div class="container" style="right:0;left:0"><div class="row"><div class="col s12 m12 l12"><div class="brand"><h1 class="description center-align post-title">Podman vs Docker | Podman简介及安装</h1></div></div></div></div></div><main class="post-container content"><link rel="stylesheet" href="/libs/tocbot/tocbot.css"><style>#articleContent h1::before,#articleContent h2::before,#articleContent h3::before,#articleContent h4::before,#articleContent h5::before,#articleContent h6::before{display:block;content:" ";height:100px;margin-top:-100px;visibility:hidden}#articleContent :focus{outline:0}.toc-fixed{position:fixed;top:64px}.toc-widget{width:345px;padding-left:20px}.toc-widget .toc-title{padding:35px 0 15px 17px;font-size:1.5rem;font-weight:700;line-height:1.5rem}.toc-widget ol{padding:0;list-style:none}#toc-content{padding-bottom:30px;overflow:auto}#toc-content ol{padding-left:10px}#toc-content ol li{padding-left:10px}#toc-content .toc-link:hover{color:#42b983;font-weight:700;text-decoration:underline}#toc-content .toc-link::before{background-color:transparent;max-height:25px;position:absolute;right:23.5vw;display:block}#toc-content .is-active-link{color:#42b983}#floating-toc-btn{position:fixed;right:15px;bottom:76px;padding-top:15px;margin-bottom:0;z-index:998}#floating-toc-btn .btn-floating{width:48px;height:48px}#floating-toc-btn .btn-floating i{line-height:48px;font-size:1.4rem}</style><div class="row"><div id="main-content" class="col s12 m12 l9"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="row tag-cate"><div class="col s7"><div class="article-tag"><a href="/tags/docker/"><span class="chip bg-color">docker</span></a> <a href="/tags/k8s/"><span class="chip bg-color">k8s</span></a></div></div><div class="col s5 right-align"><div class="post-cate"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E5%B7%A5%E7%A8%8B%E5%8C%96/" class="post-category">项目开发工程化</a></div></div></div><div class="post-info"><div class="post-date info-break-policy"><i class="far fa-calendar-minus fa-fw"></i> 发布日期:&nbsp;&nbsp; 2022-01-12</div></div></div><hr class="clearfix"><link rel="stylesheet" href="/libs/prism/prism.css"><div class="card-content article-card-content"><div id="articleContent"><h2 id="1-前言"><a href="#1-前言" class="headerlink" title="1. 前言"></a>1. 前言</h2><p><a target="_blank" rel="noopener" href="https://podman.io/"><strong>podman</strong></a>在功能上与<a target="_blank" rel="noopener" href="https://www.docker.com/"><strong>docker</strong></a>不能说很像，只能说一模一样，甚至于你给podman取个别名为docker，你会发现这不就是docker吗？🤔接下来对比一下两者的异同吧。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">alias</span> <span class="token assign-left variable">docker</span><span class="token operator">=</span>podman<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="2-什么是Docker"><a href="#2-什么是Docker" class="headerlink" title="2. 什么是Docker"></a>2. 什么是Docker</h2><blockquote><p><a target="_blank" rel="noopener" href="https://www.docker.com/"><em>Docker</em></a> 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中，然后发布到任何流行的 Linux或Windows操作系统的机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。 by百度百科</p></blockquote><h2 id="3-什么是Podman"><a href="#3-什么是Podman" class="headerlink" title="3. 什么是Podman"></a>3. 什么是Podman</h2><p>​ <a target="_blank" rel="noopener" href="https://docs.podman.io/en/latest/">Podman</a> 是一个开源的 Linux 原生工具，旨在根据<a target="_blank" rel="noopener" href="https://opencontainers.org/">开放容器计划 （OCI）</a> 标准开发、管理和运行容器和 Pod。Podman 由 <a target="_blank" rel="noopener" href="https://www.redhat.com/en">Red Hat</a> 开发，是用户友好的容器编排器，是 RedHat 8 和 CentOS 8 自带的默认容器引擎。实际上，它是<strong>一组命令行工具</strong>之一.</p><p>​ 这组命令行套件就是：</p><ul><li><a target="_blank" rel="noopener" href="https://docs.podman.io/en/latest/">Podman</a> - Pods 和容器映像管理器</li><li><strong><a target="_blank" rel="noopener" href="https://buildah.io/">Buildah</a></strong> - 容器生成器</li><li><strong><a target="_blank" rel="noopener" href="https://github.com/containers/skopeo">Skopeo</a></strong> - 容器映像检查管理器</li><li><strong><a target="_blank" rel="noopener" href="https://github.com/opencontainers/runc">runc</a></strong> - 容器运行器和功能生成器到 podman 和 buildah</li><li><strong><a target="_blank" rel="noopener" href="https://github.com/containers/crun">crun</a></strong> - 可选的运行时，可为无根容器提供更大的灵活性、控制力和安全性</li></ul><p>​ 这些工具还可以与**任何OCI兼容的容器引擎(如Docker)**配合使用，从而可以轻松过渡到Podman或将其用于现有的Docker安装。</p><blockquote><p>那么，<strong>Kubernetes 可以使用 Podman 吗？</strong></p></blockquote><p>答案是可以的，而且<strong>在k8s中使用podman比使用Docker更好</strong>。这就要谈到它们之间的差异了。</p><h2 id="4-Docker-vs-Podman"><a href="#4-Docker-vs-Podman" class="headerlink" title="4. Docker vs Podman"></a>4. Docker vs Podman</h2><p>Podman和Docker从使用上来说几乎是一模一样的，而他们的差异就在于底层。</p><h3 id="不同1-架构设计不同"><a href="#不同1-架构设计不同" class="headerlink" title="不同1. 架构设计不同"></a>不同1. 架构设计不同</h3><blockquote><p>Docker 有一个由用来调解客户与服务器逻辑的守护进程； 而Podman 不需要这个中介。</p></blockquote><ul><li><p>Docker 使用守护程序**（一个在后台运行的持续程序）来创建映像和运行容器。</p></li><li><p>Podman有一个无守护进程的的容器引擎<strong>，用于在 Linux 系统上进行开发、管理和运行 OCI Containers。 Containers 能以 root 模式运行，也</strong>能以非 root 模式运行**。</p></li></ul><h3 id="不同2-安全性不同"><a href="#不同2-安全性不同" class="headerlink" title="不同2. 安全性不同"></a>不同2. 安全性不同</h3><ul><li><p>Podman 允许容器的非 root 用户权限。无根容器被认为比具有 root 权限的容器更安全。Podman 中的容器默认没有 root 访问权限，这在 root 和非 root之间增加了一道天然屏障，从而提高了安全性。尽管如此，Podman仍然可以运行root和非 root容器。</p></li><li><p>而在 Docker 中，守护程序具有 root 权限，使其成为攻击者的首选网关。</p></li></ul><h3 id="不同3-启动方式不同"><a href="#不同3-启动方式不同" class="headerlink" title="不同3. 启动方式不同"></a>不同3. 启动方式不同</h3><ul><li><code>docker cli</code> 命令通过API跟 <code>Docker Engine(引擎)</code>交互告诉它我想创建一个container，然后<code>docker Engine</code>才会调用<code>OCI container runtime(runc)</code>来启动一个container。这代表container的process(进程)不会是<code>Docker CLI</code>的<code>child process(子进程)</code>，而是<code>Docker Engine</code>的<code>child process</code>。</li><li><code>Podman</code>是直接给<code>OCI containner runtime(runc)</code>进行交互来创建container的，所以<code>container process</code>直接是<code>podman</code>的<code>child process</code>。</li></ul><h2 id="5-k8s弃用Docker"><a href="#5-k8s弃用Docker" class="headerlink" title="5. k8s弃用Docker"></a>5. k8s弃用Docker</h2><blockquote><p>简单来讲就是 K8s 支持 Docker 的代价太大了。</p></blockquote><p><a target="_blank" rel="noopener" href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.20.md#dockershim-deprecation"><strong>查看官方声明</strong></a></p><p><code>Docker</code>并不支持<strong>CRI</strong>（容器运行时接口）这一<code>Kubernetes</code>运行时API，而<code>Kubernetes</code>用户一直以来所使用的其实是名为**<code>dockershim</code>**的桥接服务。<code>Dockershim</code>能够转换<code>Docker API</code>与<code>CRI</code>，但在后续版本当中，Kubernetes将不再提供这项桥接服务。因为这太麻烦了。</p><h4 id="原因1-k8s只需要Docker-Engine中的Container-Runtime"><a href="#原因1-k8s只需要Docker-Engine中的Container-Runtime" class="headerlink" title="原因1. k8s只需要Docker Engine中的Container Runtime"></a>原因1. k8s只需要Docker Engine中的Container Runtime</h4><p><strong>首先</strong>，对于 K8s 来说 Docker 太重了。</p><p>Docker 是包含了很多东西的，例如：</p><ul><li>CLI</li><li>API</li><li>Server</li><li>Container Runtime</li><li>Volumes</li><li>Network</li><li>build image</li></ul><p>但是 <code>K8s</code> 只是使用其中的 <code>container runtime</code>（容器运行环境）。</p><p><img src="https://cdn.jsdelivr.net/gh/hjwforever/images@main/img/docker/%E6%9E%B6%E6%9E%84%E5%9B%BE.png" alt="docker架构图"></p><h4 id="原因2-k8s支持Docker的话需要额外付出许多"><a href="#原因2-k8s支持Docker的话需要额外付出许多" class="headerlink" title="原因2. k8s支持Docker的话需要额外付出许多"></a>原因2. k8s支持Docker的话需要额外付出许多</h4><p><strong>其次</strong>，<code>K8s</code> 为了支持 <code>Docker</code> 还需要单独开发和维护一个组件 – **<code>dockershim</code>**。</p><p>因为 <code>Docker</code> 不支持 <code>K8s</code> 的 CRI 标准，所以 <code>K8s</code> 需要搭建一个对接 <code>Docker</code> 的桥梁，就是 <code>dockershim</code>。</p><p><code>dockershim</code> 只是一个<strong>临时解决方案</strong>，长期的维护越来越麻烦，例如不兼容 cgroups v2、用户命名空间等新特性。</p><blockquote><p><strong>主要基于以上两个原因，K8s 决定弃用 Docker。</strong></p></blockquote><h2 id="6-Podman的安装"><a href="#6-Podman的安装" class="headerlink" title="6. Podman的安装"></a>6. Podman的安装</h2><p>[官网安装教程](<a target="_blank" rel="noopener" href="https://podman.io/getting-started/installation">Podman Installation</a>)</p><h3 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h3><blockquote><p>注意：Podman 在 CentOS 7 的默认 Extras 存储库和 CentOS 8 和 Stream 的 AppStream 存储库中可用。</p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> yum -y <span class="token function">install</span> <span class="token function">podman</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="Ubutun-20-10-及以后新版"><a href="#Ubutun-20-10-及以后新版" class="headerlink" title="Ubutun 20.10 及以后新版"></a>Ubutun 20.10 及以后新版</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> -y update
<span class="token function">sudo</span> <span class="token function">apt-get</span> -y <span class="token function">install</span> <span class="token function">podman</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="Ubuntu-20-04-或-低版本安装"><a href="#Ubuntu-20-04-或-低版本安装" class="headerlink" title="Ubuntu 20.04 或 低版本安装"></a>Ubuntu 20.04 或 低版本安装</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">.</span> /etc/os-release

<span class="token builtin class-name">echo</span> <span class="token string">"deb https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/xUbuntu_<span class="token variable">$&#123;VERSION_ID&#125;</span>/ /"</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/devel:kubic:libcontainers:stable.list

<span class="token function">curl</span> -L https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/xUbuntu_<span class="token variable">$&#123;VERSION_ID&#125;</span>/Release.key <span class="token operator">|</span> <span class="token function">sudo</span> apt-key <span class="token function">add</span> -

<span class="token function">sudo</span> <span class="token function">apt-get</span> update

<span class="token function">sudo</span> <span class="token function">apt-get</span> -y upgrade

<span class="token function">sudo</span> <span class="token function">apt-get</span> -y <span class="token function">install</span> <span class="token function">podman</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Debian"><a href="#Debian" class="headerlink" title="Debian"></a>Debian</h3><blockquote><p>Debian 11（Bullseye）存储库及更高版本支持</p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> yum -y <span class="token function">install</span> <span class="token function">podman</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="Fedora"><a href="#Fedora" class="headerlink" title="Fedora"></a>Fedora</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> dnf -y <span class="token function">install</span> <span class="token function">podman</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="7-Podman的使用"><a href="#7-Podman的使用" class="headerlink" title="7. Podman的使用"></a>7. Podman的使用</h2><p>podman命令与docker可以说一模一样，如果你熟悉docker的话，那就是无缝切换 <code>alias docker=podman</code> : )</p><h3 id="检查版本"><a href="#检查版本" class="headerlink" title="检查版本"></a>检查版本</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">podman</span> --version<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="运行容器"><a href="#运行容器" class="headerlink" title="运行容器"></a>运行容器</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">podman</span> run -dt -p <span class="token number">80</span>:80 --name nginx -v nginx<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="列出正在运行的容器"><a href="#列出正在运行的容器" class="headerlink" title="列出正在运行的容器"></a>列出正在运行的容器</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">podman</span> <span class="token function">ps</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="查看一个容器信息"><a href="#查看一个容器信息" class="headerlink" title="查看一个容器信息"></a>查看一个容器信息</h3><p>ps: 这里的nginx是运行容器时 <code>--name nginx</code> 设置的别名， 也可以使用<strong>容器id</strong>来指定所要查看的容器</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">podman</span> inspect nginx<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="查看日志"><a href="#查看日志" class="headerlink" title="查看日志"></a>查看日志</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">podman</span> logs nginx<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="查看运行中容器的资源使用情况"><a href="#查看运行中容器的资源使用情况" class="headerlink" title="查看运行中容器的资源使用情况"></a>查看运行中容器的资源使用情况</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">podman</span> <span class="token function">top</span> nginx

<span class="token function">podman</span> stats nginx<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="迁移容器"><a href="#迁移容器" class="headerlink" title="迁移容器"></a>迁移容器</h3><p>Podman 支持将容器从一台机器迁移到另一台机器。<br>首先，在源机器上对容器设置检查点，并将容器打包到指定位置。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">podman</span> container checkpoint <span class="token operator">&lt;</span>container_id<span class="token operator">></span> -e /tmp/checkpoint.tar.gz
<span class="token function">scp</span> /tmp/checkpoint.tar.gz <span class="token operator">&lt;</span>destination_system<span class="token operator">></span>:/tmp<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>然后，在目标机器上使用源机器上传输过来的打包文件对容器进行恢复。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">podman</span> container restore -i /tmp/checkpoint.tar.gz<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>更多命令可以通过<code>podman help</code>查看</p></div><hr><div class="reprint" id="reprint-statement"><div class="reprint__author"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-user">文章作者:</i></span> <span class="reprint-info"><a href="/about" rel="external nofollow noreferrer">hjwforever</a></span></div><div class="reprint__type"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-link">文章链接:</i></span> <span class="reprint-info"><a href="https://aruoxi.com/posts/fad3.html">https://aruoxi.com/posts/fad3.html</a></span></div><div class="reprint__notice"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-copyright">版权声明:</i></span> <span class="reprint-info">本博客所有文章除特別声明外，均采用 <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a> 许可协议。转载请注明来源 <a href="/about" target="_blank">hjwforever</a> !</span></div></div><script async defer>document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }</script><div class="tag_share" style="display:block"><div class="post-meta__tag-list" style="display:inline-block"><div class="article-tag"><a href="/tags/docker/"><span class="chip bg-color">docker</span></a> <a href="/tags/k8s/"><span class="chip bg-color">k8s</span></a></div></div><div class="post_share" style="zoom:80%;width:fit-content;display:inline-block;float:right;margin:-.15rem 0"><link rel="stylesheet" href="/libs/share/css/share.min.css"><div id="article-share"><div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div><script src="/libs/share/js/social-share.min.js"></script></div></div></div><style>#reward{margin:40px 0;text-align:center}#reward .reward-link{font-size:1.4rem;line-height:38px}#reward .btn-floating:hover{box-shadow:0 6px 12px rgba(0,0,0,.2),0 5px 15px rgba(0,0,0,.2)}#rewardModal{width:320px;height:350px}#rewardModal .reward-title{margin:15px auto;padding-bottom:5px}#rewardModal .modal-content{padding:10px}#rewardModal .close{position:absolute;right:15px;top:15px;color:rgba(0,0,0,.5);font-size:1.3rem;line-height:20px;cursor:pointer}#rewardModal .close:hover{color:#ef5350;transform:scale(1.3);-moz-transform:scale(1.3);-webkit-transform:scale(1.3);-o-transform:scale(1.3)}#rewardModal .reward-tabs{margin:0 auto;width:210px}.reward-tabs .tabs{height:38px;margin:10px auto;padding-left:0}.reward-content ul{padding-left:0!important}.reward-tabs .tabs .tab{height:38px;line-height:38px}.reward-tabs .tab a{color:#fff;background-color:#ccc}.reward-tabs .tab a:hover{background-color:#ccc;color:#fff}.reward-tabs .wechat-tab .active{color:#fff!important;background-color:#22ab38!important}.reward-tabs .alipay-tab .active{color:#fff!important;background-color:#019fe8!important}.reward-tabs .reward-img{width:210px;height:210px}</style><div id="reward"><a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a><div id="rewardModal" class="modal"><div class="modal-content"><a class="close modal-close"><i class="fas fa-times"></i></a><h4 class="reward-title">你的赏识是我前进的动力</h4><div class="reward-content"><div class="reward-tabs"><ul class="tabs row"><li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li><li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li></ul><div id="alipay"><img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码"></div><div id="wechat"><img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码"></div></div></div></div></div></div><script>$(function(){$(".tabs").tabs()})</script></div></div><style>.valine-card{margin:1.5rem auto}.valine-card .card-content{padding:20px 20px 5px 20px}#vcomments textarea{box-sizing:border-box;background:url(/medias/comment_bg.png) 100% 100% no-repeat}#vcomments p{margin:2px 2px 10px;font-size:1.05rem;line-height:1.78rem}#vcomments blockquote p{text-indent:.2rem}#vcomments a{padding:0 2px;color:#4cbf30;font-weight:500;text-decoration:none}#vcomments img{max-width:100%;height:auto;cursor:pointer}#vcomments ol li{list-style-type:decimal}#vcomments ol,ul{display:block;padding-left:2em;word-spacing:.05rem}#vcomments ul li,ol li{display:list-item;line-height:1.8rem;font-size:1rem}#vcomments ul li{list-style-type:disc}#vcomments ul ul li{list-style-type:circle}#vcomments table,td,th{padding:12px 13px;border:1px solid #dfe2e5}#vcomments table,td,th{border:0}table tr:nth-child(2n),thead{background-color:#fafafa}#vcomments table th{background-color:#f2f2f2;min-width:80px}#vcomments table td{min-width:80px}#vcomments h1{font-size:1.85rem;font-weight:700;line-height:2.2rem}#vcomments h2{font-size:1.65rem;font-weight:700;line-height:1.9rem}#vcomments h3{font-size:1.45rem;font-weight:700;line-height:1.7rem}#vcomments h4{font-size:1.25rem;font-weight:700;line-height:1.5rem}#vcomments h5{font-size:1.1rem;font-weight:700;line-height:1.4rem}#vcomments h6{font-size:1rem;line-height:1.3rem}#vcomments p{font-size:1rem;line-height:1.5rem}#vcomments hr{margin:12px 0;border:0;border-top:1px solid #ccc}#vcomments blockquote{margin:15px 0;border-left:5px solid #42b983;padding:1rem .8rem .3rem .8rem;color:#666;background-color:rgba(66,185,131,.1)}#vcomments pre{font-family:monospace,monospace;padding:1.2em;margin:.5em 0;background:#272822;overflow:auto;border-radius:.3em;tab-size:4}#vcomments code{font-family:monospace,monospace;padding:1px 3px;font-size:.92rem;color:#e96900;background-color:#f8f8f8;border-radius:2px}#vcomments pre code{font-family:monospace,monospace;padding:0;color:#e8eaf6;background-color:#272822}#vcomments pre[class*=language-]{padding:1.2em;margin:.5em 0}#vcomments code[class*=language-],pre[class*=language-]{color:#e8eaf6}#vcomments [type=checkbox]:not(:checked),[type=checkbox]:checked{position:inherit;margin-left:-1.3rem;margin-right:.4rem;margin-top:-1px;vertical-align:middle;left:unset;visibility:visible}#vcomments b,strong{font-weight:700}#vcomments dfn{font-style:italic}#vcomments small{font-size:85%}#vcomments cite{font-style:normal}#vcomments mark{background-color:#fcf8e3;padding:.2em}#vcomments table,td,th{padding:12px 13px;border:1px solid #dfe2e5}table tr:nth-child(2n),thead{background-color:#fafafa}#vcomments table th{background-color:#f2f2f2;min-width:80px}#vcomments table td{min-width:80px}#vcomments [type=checkbox]:not(:checked),[type=checkbox]:checked{position:inherit;margin-left:-1.3rem;margin-right:.4rem;margin-top:-1px;vertical-align:middle;left:unset;visibility:visible}</style><div class="card valine-card" data-aos="fade-up"><div class="comment_headling" style="font-size:20px;font-weight:700;position:relative;padding-left:20px;top:15px;padding-bottom:5px"><i class="fas fa-comments fa-fw" aria-hidden="true"></i> <span>评论</span></div><div id="vcomments" class="card-content" style="display:grid"></div></div><script src="/libs/valine/av-min.js"></script><script src="/libs/valine/Valine.min.js"></script><script>new Valine({el:"#vcomments",appId:"CyF9Q1Ug9LkqeKsK32cHqNE3-gzGzoHsz",appKey:"RpP6VQSp0Y4R9wEWXLwVLtFE",notify:!1,verify:!1,visitor:!0,avatar:"mm",pageSize:"10",lang:"zh-cn",placeholder:"说点什么吧~"})</script><article id="prenext-posts" class="prev-next articles"><div class="row article-row"><div class="article col s12 m6" data-aos="fade-up" data-aos="fade-up"><div class="article-badge left-badge text-color"><i class="far fa-dot-circle"></i> &nbsp;本篇</div><div class="card"><a href="/posts/fad3.html"><div class="card-image"><img src="/medias/featureimages/2.jpg" class="responsive-img" alt="Podman vs Docker | Podman简介及安装"> <span class="card-title">Podman vs Docker | Podman简介及安装</span></div></a><div class="card-content article-content"><div class="summary block-with-text"></div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i> 2022-01-12</span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E5%B7%A5%E7%A8%8B%E5%8C%96/" class="post-category">项目开发工程化</a></span></div></div><div class="card-action article-tags"><a href="/tags/docker/"><span class="chip bg-color">docker</span></a> <a href="/tags/k8s/"><span class="chip bg-color">k8s</span></a></div></div></div><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge right-badge text-color">下一篇&nbsp;<i class="fas fa-chevron-right"></i></div><div class="card"><a href="/posts/5def.html"><div class="card-image"><img src="/medias/featureimages/5.jpg" class="responsive-img" alt="JS 实现监听器Listener类"> <span class="card-title">JS 实现监听器Listener类</span></div></a><div class="card-content article-content"><div class="summary block-with-text"></div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i> 2021-10-03</span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/%E5%89%8D%E7%AB%AF/" class="post-category">前端</a></span></div></div><div class="card-action article-tags"><a href="/tags/eventBus/"><span class="chip bg-color">eventBus</span></a> <a href="/tags/%E5%89%8D%E7%AB%AF/"><span class="chip bg-color">前端</span></a> <a href="/tags/js/"><span class="chip bg-color">js</span></a> <a href="/tags/%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0/"><span class="chip bg-color">源码实现</span></a></div></div></div></div></article></div><script src="/libs/codeBlock/codeBlockFuction.js"></script><script src="/libs/codeBlock/codeLang.js"></script><script src="/libs/codeBlock/codeCopy.js"></script><script src="/libs/codeBlock/codeShrink.js"></script></div><div id="toc-aside" class="expanded col l3 hide-on-med-and-down"><div class="toc-widget card" style="background-color:#fff"><div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div><div id="toc-content"></div></div></div></div><div id="floating-toc-btn" class="hide-on-med-and-down"><a class="btn-floating btn-large bg-color"><i class="fas fa-list-ul"></i></a></div><script src="/libs/tocbot/tocbot.min.js"></script><script>$(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });</script></main><footer class="page-footer bg-color"><div class="container row center-align" style="margin-bottom:0!important"><div class="col s12 m8 l8 copy-right">Copyright&nbsp;&copy; <span id="year">2021-2022</span> <span id="year">2021</span> <a href="/about" target="_blank">hjwforever</a> |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a> |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a><br><span id="busuanzi_container_site_pv">|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv" class="white-color"></span>&nbsp;次</span> <span id="busuanzi_container_site_uv">|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv" class="white-color"></span>&nbsp;人</span><br><br><span id="icp"><img src="/medias/icp.png" style="vertical-align:text-bottom"> <a href="https://beian.miit.gov.cn/" target="_blank">赣ICP备2020013246号</a></span></div><div class="col s12 m4 l4 social-link social-statis"><a href="https://github.com/hjwforever" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fab fa-github"></i></a><a href="mailto:hjwbelieve@gmail.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fas fa-envelope-open"></i></a><a href="https://twitter.com/hjwbelieve" class="tooltipped" target="_blank" data-tooltip="关注我的Twitter: https://twitter.com/hjwbelieve" data-position="top" data-delay="50"><i class="fab fa-twitter"></i></a><a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1326153330" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1326153330" data-position="top" data-delay="50"><i class="fab fa-qq"></i></a><a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50"><i class="fas fa-rss"></i></a></div></div></footer><div class="progress-bar"></div><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"><span class="title"><i class="fas fa-search"></i> &nbsp;&nbsp;搜索</span> <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input"></div><div id="searchResult"></div></div></div><script>$(function(){!function(t,a,s){"use strict";$.ajax({url:t,dataType:"xml",success:function(t){var e=$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),r=document.getElementById(a),n=document.getElementById(s);r.addEventListener("input",function(){var f='<ul class="search-result-list">',m=this.value.trim().toLowerCase().split(/[\s\-]+/);n.innerHTML="",this.value.trim().length<=0||(e.forEach(function(t){var r=!0,n=t.title.trim().toLowerCase(),a=t.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),e=t.url;e=0===e.indexOf("/")?t.url:"/"+e;var s=-1,i=-1,l=-1;if(""!==n&&""!==a&&m.forEach(function(t,e){s=n.indexOf(t),i=a.indexOf(t),s<0&&i<0?r=!1:(i<0&&(i=0),0===e&&(l=i))}),r){f+="<li><a href='"+e+"' class='search-result-title'>"+n+"</a>";var c=t.content.trim().replace(/<[^>]+>/g,"");if(0<=l){var u=l-20,o=l+80;u<0&&(u=0),0===u&&(o=100),o>c.length&&(o=c.length);var h=c.substr(u,o);m.forEach(function(t){var e=new RegExp(t,"gi");h=h.replace(e,'<em class="search-keyword">'+t+"</em>")}),f+='<p class="search-result">'+h+"...</p>"}f+="</li>"}}),f+="</ul>",n.innerHTML=f)})}})}("/search.xml","searchInput","searchResult")})</script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fas fa-arrow-up"></i></a></div><script src="/libs/materialize/materialize.min.js"></script><script src="/libs/masonry/masonry.pkgd.min.js"></script><script src="/libs/aos/aos.js"></script><script src="/libs/scrollprogress/scrollProgress.min.js"></script><script src="/libs/lightGallery/js/lightgallery-all.min.js"></script><script src="/js/matery.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="/libs/others/clicklove.js" async></script><script async src="/libs/others/busuanzi.pure.mini.js"></script><script src="/libs/background/ribbon-dynamic.js" async></script><script src="/libs/instantpage/instantpage.js" type="module"></script><script src="//cdn.jsdelivr.net/npm/js-base64/base64.min.js"></script><script>const hasAttr = (e,a) => a.some(_=> e.attr(_)!==undefined);
        $('a').each(function() {
          const $this = $(this);
          if(hasAttr($this,["data-fancybox","ignore-external-link"])) return;
          const href = $this.attr('href');
          if (href && href.match('^((http|https|thunder|qqdl|ed2k|Flashget|qbrowser|ftp|rtsp|mms)://)')) {
            const strs = href.split('/');
            if (strs.length >= 3) {
                const host = strs[2];
                if (host !== 'aruoxi.com' || window.location.host) {
                    $this.attr('href', '/go.html?u='+Base64.encode(href)+'').attr('rel', 'external nofollow noopener noreferrer');
                    if (true) {
                        $this.attr('target', '_blank');
                    }
                }
            }
          }
        });</script></body></html>